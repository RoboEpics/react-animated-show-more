"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=require("react"),React__default=_interopDefault(React);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var getShadowStyles=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#fff",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return{backgroundImage:"linear-gradient(to bottom, transparent, ".concat(e,")"),position:"absolute",bottom:0,left:0,width:"100%",height:n===t?0:"60px"}},ShadowOverlay=function(e){var t=e.color,n=e.height,r=e.maxHeight;return React__default.createElement("div",{style:getShadowStyles(t,n,r)})},DefaultToggle=function(e){var t=e.isOpen;return React__default.createElement("span",{className:"AnimatedReadMore__DefaultToggle"},t?"Show less":"Show more")},MainContent=function(e){var t=e.height,n=e.animationSpeed,r=void 0===n?300:n,a=e.children;return React__default.createElement("div",{style:{overflow:"hidden",maxHeight:"".concat(t,"px"),transition:"max-height ".concat(r,"ms linear")}},a)},AnimatedReadMore=function(e){function t(){return u&&u.current?u.current.offsetHeight:0}var n=e.toggle,r=e.height,a=void 0===r?200:r,o=e.shadowColor,i=e.speed,l=e.children,c=n||DefaultToggle,u=React.useRef(null),d=_slicedToArray(React.useState({userDefined:a,internal:a,isOpen:!1}),2),f=d[0],s=d[1],h=f.userDefined,_=f.internal,p=f.isOpen,g=t()!==h,y=p||_!==t()&&h!==t();return React__default.createElement(React__default.Fragment,null,React__default.createElement("div",{style:{position:"relative",overflow:"hidden"}},g&&React__default.createElement(ShadowOverlay,{color:o,height:_,maxHeight:t()}),React__default.createElement(MainContent,{height:_,animationSpeed:i},l),React__default.createElement("div",{ref:u,style:{zIndex:-1,opacity:0,position:"absolute",top:0},"aria-hidden":"true"},l)),y&&React__default.createElement("button",{style:{display:"block",border:"none",outline:"none",background:"transparent",padding:0,color:"inherit",font:"inherit"},onClick:function(){s(_objectSpread({},f,_===h?{isOpen:!0,internal:t()}:{isOpen:!1,internal:f.userDefined}))}},React__default.createElement(c,{isOpen:p})))};module.exports=AnimatedReadMore;
